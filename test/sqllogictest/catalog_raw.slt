# Copyright Materialize, Inc. and contributors. All rights reserved.
#
# Use of this software is governed by the Business Source License
# included in the LICENSE file at the root of this repository.
#
# As of the Change Date specified in that file, in accordance with
# the Business Source License, use of this software will be governed
# by the Apache License, Version 2.0.

mode cockroach

statement ok
CREATE TABLE foo (a INT);

# TODO: At the moment, the catalog doesn't actually use EpochMillis timestamps.
# In the meantime, use serializable.
simple conn=mz_system,user=mz_system
SET TRANSACTION_ISOLATION TO serializable;
----
COMPLETE 0

simple conn=mz_system,user=mz_system
SELECT data->'value'->>'name' AS name
FROM mz_internal.mz_catalog_raw
WHERE data->>'kind' = 'Item' AND data->'key'->'gid'->'value'->'User' IS NOT NULL;
----
foo
COMPLETE 1
